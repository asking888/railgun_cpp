rewrite railgun vm in cpp
